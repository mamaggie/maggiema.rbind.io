<!DOCTYPE html><html lang="en-us" >

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Maggie Ma">

  
  
  
    
  
  <meta name="description" content="A few troubleshooting strategies to save your sanity">

  
  <link rel="alternate" hreflang="en-us" href="https://maggie-98.github.io/post/2019-03-04-hugo-troubleshooting/">

  


  
  
  
  <meta name="theme-color" content="#06805E">
  

  
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/tomorrow.min.css" crossorigin="anonymous" title="hl-light">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/tomorrow.min.css" crossorigin="anonymous" title="hl-dark" disabled>
      
    

    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      
        
      

      
    
      

      
      

      
    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,400i%7CKarla:400,400i,700,700i%7CDM+Mono&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  





<script async src="https://www.googletagmanager.com/gtag/js?id=UA-99209585-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
      dataLayer.push(arguments);
  }

  function trackOutboundLink(url, target) {
    gtag('event', 'click', {
         'event_category': 'outbound',
         'event_label': url,
         'transport_type': 'beacon',
         'event_callback': function () {
           if (target !== '_blank') {
             document.location = url;
           }
         }
    });
    console.debug("Outbound link clicked: " + url);
  }

  function onClickCallback(event) {
    if ((event.target.tagName !== 'A') || (event.target.host === window.location.host)) {
      return;
    }
    trackOutboundLink(event.target, event.target.getAttribute('target'));  
  }

  gtag('js', new Date());
  gtag('config', 'UA-99209585-1', {});

  
  document.addEventListener('click', onClickCallback, false);
</script>


  


  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hubd7880285348c4660acc9402140a2483_242472_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hubd7880285348c4660acc9402140a2483_242472_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="https://maggie-98.github.io/post/2019-03-04-hugo-troubleshooting/">

  
  
  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="og:site_name" content="Maggie Ma">
  <meta property="og:url" content="https://maggie-98.github.io/post/2019-03-04-hugo-troubleshooting/">
  <meta property="og:title" content="A Spoonful of Hugo: Troubleshooting Your Build | Maggie Ma">
  <meta property="og:description" content="A few troubleshooting strategies to save your sanity"><meta property="og:image" content="https://maggie-98.github.io/post/2019-03-04-hugo-troubleshooting/featured.jpg">
  <meta property="twitter:image" content="https://maggie-98.github.io/post/2019-03-04-hugo-troubleshooting/featured.jpg"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2019-03-04T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2019-03-04T00:00:00&#43;00:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://maggie-98.github.io/post/2019-03-04-hugo-troubleshooting/"
  },
  "headline": "A Spoonful of Hugo: Troubleshooting Your Build",
  
  "image": [
    "https://maggie-98.github.io/post/2019-03-04-hugo-troubleshooting/featured.jpg"
  ],
  
  "datePublished": "2019-03-04T00:00:00Z",
  "dateModified": "2019-03-04T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "alison"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "Maggie Ma",
    "logo": {
      "@type": "ImageObject",
      "url": "https://maggie-98.github.io/images/icon_hubd7880285348c4660acc9402140a2483_242472_192x192_fill_lanczos_center_2.png"
    }
  },
  "description": "A few troubleshooting strategies to save your sanity"
}
</script>

  

  


  


  





  <title>A Spoonful of Hugo: Troubleshooting Your Build | Maggie Ma</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  
<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="/">Maggie Ma</a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav ml-auto">
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/about"><span>About</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link  active" href="/post"><span>Blog</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/talks"><span>Talks</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/projects"><span>Projects</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/resume"><span>Resume</span></a>
        </li>

        
        

      

        

        
        <li class="nav-item">
          <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        

        
        <li class="nav-item">
          <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
        </li>
        

      </ul>

    </div>
  </div>
</nav>


  <article class="article">
  
  




















  
  
    
  


<div class="article-container pt-3">
  <h1>A Spoonful of Hugo: Troubleshooting Your Build</h1>

  

  


<div class="article-metadata">

  
  
  
  
  <div>
    

  
  <span><a href="/authors/alison/">alison</a></span>
  </div>
  
  

  
  <span class="article-date">
    
    
      
    
    Mar 4, 2019
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    9 min read
  </span>
  

  
  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/categories/hugo/">hugo</a>, <a href="/categories/blogdown/">blogdown</a></span>
  

</div>

  














</div>


<div class="article-header article-container featured-image-wrapper mt-4 mb-4" style="max-width: 720px; max-height: 481px;">
  <div style="position: relative">
    <img src="/post/2019-03-04-hugo-troubleshooting/featured_hu3d03a01dcc18bc5be0e67db3d8d209a6_1199790_720x0_resize_q90_lanczos.jpg" alt="" class="featured-image">
    <span class="article-header-caption"><a href="https://unsplash.com/photos/Prfs32wh-o4">Photo by Joanna Kosinska on Unsplash</a></span>
  </div>
</div>


  
  <div class="article-container">
    
    <div class="row">
    
    <div class="col-12 col-lg-10ish article-style">
      <blockquote>
<p>&ldquo;Just a spoonful of Hugo helps the blog go down.&rdquo;</p>
</blockquote>
<ul>
<li>me, only somewhat kidding</li>
</ul>
<p>In this series, I&rsquo;m sharing small spoonfuls of Hugo that I have learned that hopefully can help you get your site <em>UP</em> (and even better- more efficient, more streamlined, more automated). You can read the previous posts about my &ldquo;Spoonful of Hugo&rdquo; series 
<a href="/post/2019-02-19-hugo-archetypes/">about Hugo archetypes</a>, 
<a href="/post/2019-02-19-hugo-netlify-toml/">Hugo versions</a>, and 
<a href="/post/2019-02-21-hugo-page-bundles/">Hugo page bundles</a>.</p>
<p>The following are a few steps that I always start with to troubleshoot any blogdown/Hugo/Netlify problems. These steps would solve what I would anecdotally estimate as ~50% of blogdown problems that I see posted in the 
<a href="https://github.com/rstudio/blogdown/issues" target="_blank" rel="noopener">GitHub repository</a> and on the 
<a href="https://community.rstudio.com/tags/blogdown" target="_blank" rel="noopener">community site</a>.</p>



<h2 id="1-update-hugo">#1: Update Hugo<a href="#1-update-hugo"><svg class="anchor-symbol" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" fill="currentColor"></path>
<path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
</svg></a>
</h2>
<div class="figure">
<img src="https://media.giphy.com/media/syCa5ird7wp0c/giphy.gif" alt="Don't be like this"  />
<p class="caption">Figure 1: Don't be like this</p>
</div>
<p>If things have gone south and you are getting Hugo errors when you use the &ldquo;Serve Site&rdquo; Addin locally, it is possible that you need to update your version of Hugo. From R, you can check your Hugo version with blogdown:</p>
<pre><code class="language-r">blogdown::hugo_version()
</code></pre>
<p>Then you can reference your 
<a href="https://themes.gohugo.io/" target="_blank" rel="noopener">Hugo theme</a> to find the minimum version of Hugo required by your theme:</p>
<div class="figure">
<img src="hugo-min-version.png" alt="Check your theme's minimum Hugo version" width="1073" />
<p class="caption">Figure 2: Check your theme's minimum Hugo version</p>
</div>
<p>You can go higher than the minimum version though, so it&rsquo;s good practice to update your Hugo, again from within R:</p>
<pre><code class="language-r">blogdown:: update_hugo()
</code></pre>
<p>Check your version again post-update:</p>
<pre><code class="language-r">blogdown::hugo_version()
</code></pre>
<pre><code>## [1] '0.79.0'
</code></pre>
<p>If you are using Netlify to build your site using Hugo, you&rsquo;ll want this version to match that- the best way to do that is with a 
<a href="/post/2019-02-19-hugo-netlify-toml/">netlify.toml file</a>.</p>



<h2 id="2-change-the-baseurl">#2: Change the baseurl<a href="#2-change-the-baseurl"><svg class="anchor-symbol" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" fill="currentColor"></path>
<path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
</svg></a>
</h2>
<p><img src="https://media.giphy.com/media/zG6MKhlBxIloc/giphy.gif" alt=""><!-- --></p>
<p>Open up your <code>config.toml</code> file and look for the <code>baseurl</code> field, usually pretty close to the top. Here is mine^[Yes that&rsquo;s right, I don&rsquo;t have a trailing slash- read on for why I can get away with this.]:</p>
<pre><code class="language-toml">baseurl = &quot;https://alison.rbind.io&quot;
</code></pre>
<p>Now if you are just starting with Hugo and don&rsquo;t <em>actually</em> have a domain name yet, try taking the advice that blogdown automatically prints out for you:</p>
<pre><code>Warning: You should change the &quot;baseurl&quot; option in config.toml 
from https://example.org to your actual domain; 
if you do not have a domain, set &quot;baseurl&quot; to &quot;/&quot;
</code></pre>
<p>But be careful here- you shouldn&rsquo;t leave it as &ldquo;/&quot;- once you do have your domain name you should update the baseurl as &ldquo;/&rdquo; is a not a valid URL.</p>



<h3 id="care-to-know-more">Care to know more?<a href="#care-to-know-more"><svg class="anchor-symbol" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" fill="currentColor"></path>
<path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
</svg></a>
</h3>
<p>Here is a quote from the person who writes the Hugo docs:</p>
<blockquote>
<p>&ldquo;&hellip;the only purpose for the baseurl field in the config is to define the full base URL of your website for deployment purposes.&rdquo; - @
<a href="https://discourse.gohugo.io/t/how-not-to-specify-url-site/5691/7" target="_blank" rel="noopener">rdwatters</a></p>
</blockquote>
<p>The main error that would happen without the trailing slash in the past is that you would end up with a site where the theme&rsquo;s CSS would be all wrong. This was probably because the theme designer used code like this buried in a layout file:</p>
<pre><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;{{ .Site.BaseURL }}css/style.css&quot;/&gt;
</code></pre>
<p>Now, if you set <code>baseurl = &quot;http://mysite.com&quot;</code> but only rendered locally, things would look just peachy, because the default local server already included the trailing slash. So, the link in the html file would be^[https://discourse.gohugo.io/t/how-not-to-specify-url-site/5691/5]:</p>
<pre><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;http://localhost:1313/css/style.css&quot;&gt;
</code></pre>
<p>But, at build, the link in the html file would turn into:</p>
<pre><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;http://mysite.comcss/style.css&quot;&gt;
</code></pre>
<p>Which creates sites that look like this:</p>
<div class="figure">
<img src="https://user-images.githubusercontent.com/47527626/52856178-f37a3680-3123-11e9-9b26-6500efac7404.png" alt="Hugo tranquil peak theme"  />
<p class="caption">Figure 3: Hugo tranquil peak theme</p>
</div>
<p>
<a href="https://github.com/rstudio/blogdown/issues/369" target="_blank" rel="noopener">GitHub issue #369</a></p>
<div class="figure">
<img src="https://user-images.githubusercontent.com/18710907/27711864-820dc59a-5cf2-11e7-99c8-b9b7e7f46ab3.png" alt="Hugo universal theme"  />
<p class="caption">Figure 4: Hugo universal theme</p>
</div>
<p>
<a href="https://github.com/rstudio/blogdown/issues/131" target="_blank" rel="noopener">GitHub issue #131</a></p>
<p><img src="https://cloud.githubusercontent.com/assets/4596214/26549134/7e3968fe-4445-11e7-90b1-87dd4ac2c1c0.png" alt=""><!-- --></p>
<p>
<a href="https://github.com/rstudio/blogdown/issues/114" target="_blank" rel="noopener">GitHub issue #114</a></p>
<p>However, Hugo authors and theme developers have largely been moving towards using relative URLs instead of the baseurl to build paths. This was based on public advice voiced by the Hugo authors on the discourse forum. For example:</p>
<blockquote>
<p>&ldquo;The recommended way to reference resources is to use either relURL or absURL template funcs, which handles the slash issues.&quot;- @
<a href="https://discourse.gohugo.io/t/0-19-to-0-30-2-baseurl-forward-slash-is-required/9206" target="_blank" rel="noopener">bep</a></p>
</blockquote>
<p>Following that advice, a more up-to-date theme would have code that looks like this buried in a layout file:</p>
<pre><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;{{ &quot;css/style.css&quot; | relURL }}&quot;/&gt;  → 
</code></pre>
<p>Bottom line? If your theme uses <code>relURL</code> or <code>absURL</code> to link to site resources like CSS, JavaScript, or static images, then whether or not you include a trailing slash in your baseurl should not matter at all.</p>
<p>And here is some tough love about your theme: if the most recent version <em>does</em> still require the trailing slash in the <code>baseurl</code> to &ldquo;work&rdquo; out of the box, I would seriously consider switching themes. This is a pretty good &ldquo;canary in the coal mine&rdquo; test regarding how up-to-date the theme author is, and how well the theme you have chosen adheres to Hugo templating best practices. If you are having pain with this now, it is likely not the only thing that will be painful about working with your theme.</p>



<h2 id="3-netlify-drag-and-drop">#3: Netlify drag-and-drop<a href="#3-netlify-drag-and-drop"><svg class="anchor-symbol" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" fill="currentColor"></path>
<path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
</svg></a>
</h2>
<p><img src="https://media.giphy.com/media/DfbpTbQ9TvSX6/giphy.gif" alt=""></p>
<p>If you can render your site locally but your published site looks different, try the drag-and-drop method:</p>
<p><img src="https://arm.rbind.io/slides/img/netlify-new-site.png" alt=""></p>
<p>Use the &ldquo;Serve Site&rdquo; Addin, then drag-and-drop the <code>public/</code> folder straight into Netlify. What does this do? You can now see your public site&hellip;that you built&hellip;with your local version of Hugo. Netlify is doing none of the site building here.</p>
<p><img src="index_files/figure-html/unnamed-chunk-10-1.gif" alt=""><!-- --></p>
<p>One of the first benefits of this approach is that it ensures that you are able to actually <em>generate</em> a <code>public/</code> folder locally! I have seen folks struggle to deploy the wrong repo. This simple step can force you to make sure to use the &ldquo;Serve Site&rdquo; Addin to generate the <code>public/</code> folder, and that the repo you are trying to link to Netlify actually contains a Hugo site because you must physically move the <code>public/</code> folder. But this method can also help you diagnose other problems too.</p>
<p>If your <code>public/</code> folder <strong>does not render</strong> on Netlify, you have work to do locally. I can&rsquo;t tell you what it is as it can be a number of things, but you can be sure that your problem is not just the Netlify build- it is your local build too.</p>
<p>If your <code>public/</code> folder <strong>does render</strong> perfectly on Netlify, but you are getting a Netlify build error, then you likely have a Hugo version problem. It might be that the version you are running locally is more recent than the version run by Netlify by default to actually build your site. The good news is there is a quick fix for this! The solution is to upgrade the Hugo version Netlify is using- see my advice 
<a href="/post/2019-02-19-hugo-netlify-toml/">here for how to do that</a>.</p>
<p>If you are happy with how your site looks but you are missing content and/or seeing old deleted content, then you may need the next few strategies to troubleshoot.</p>



<h2 id="4-torch-public">#4: Torch <code>public/</code><a href="#4-torch-public"><svg class="anchor-symbol" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" fill="currentColor"></path>
<path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
</svg></a>
</h2>
<p><img src="https://media.giphy.com/media/YA6dmVW0gfIw8/giphy.gif" alt=""></p>
<p>When you are seeing very weird things locally, try deleting your local <code>public/</code> folder. Then serve site again. Sometimes it can get &ldquo;junked up&rdquo;. I&rsquo;ve found that sometimes deleted content can be a 
<a href="https://community.rstudio.com/t/deleted-blog-post-still-showing-up-on-blogdown-website-in-index-html/14107" target="_blank" rel="noopener">little sticky</a>. As recommended in the 
<a href="https://bookdown.org/yihui/blogdown/local-preview.html" target="_blank" rel="noopener">blogdown book</a>:</p>
<blockquote>
<p>&ldquo;you are strongly recommended to delete the <code>/public/</code> directory before you rebuild the site for publishing every time, because Hugo never deletes it&rdquo;</p>
</blockquote>
<p>Also, this has a bonus of reinforcing for you exactly what the &ldquo;Serve Site&rdquo; Addin <em>does</em> - it regenerates the <code>public/</code> folder. This is also the folder that, if you are using 
<a href="post/2019-02-19-hugo-netlify-toml/">Netlify to build your site</a>, is in your <code>.gitignore</code> file because Netlify (+ Hugo) generates this file &ldquo;fresh&rdquo; with each push to your GitHub repository.</p>
<p><img src="index_files/figure-html/unnamed-chunk-11-1.gif" alt=""><!-- --></p>



<h2 id="5-peruse-public">#5: Peruse <code>public/</code><a href="#5-peruse-public"><svg class="anchor-symbol" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" fill="currentColor"></path>
<path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
</svg></a>
</h2>
<p><img src="https://media.giphy.com/media/NS7gPxeumewkWDOIxi/giphy.gif" alt=""></p>
<p>When you notice weird things, try actually looking inside <code>public/</code>- don&rsquo;t be afraid to spelunk around in there! If you are seeing something wrong with your site, try to figure out how blogdown/Hugo is processing and rendering your content. This folder can tell you a lot! Keep in mind that your local <code>public/</code> folder will still contain 
<a href="#dates">future/draft/expired content</a> if you used the &ldquo;Serve Site&rdquo; Addin.</p>



<h2 id="dates">#6: Back to the future<a href="#dates"><svg class="anchor-symbol" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" fill="currentColor"></path>
<path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
</svg></a>
</h2>
<div class="figure">
<img src="https://media.giphy.com/media/ek6obDm0IwjNm/giphy.gif" alt="Where are my posts?"  />
<p class="caption">Figure 5: Where are my posts?</p>
</div>
<p>If your site renders beautifully locally, and your drag-and-drop site from <code>public/</code> looks the same, but you are missing key content when you actually deploy to Netlify using a Hugo build, you may have inadvertently stumbled into a Hugo date time warp. This is a fairly 
<a href="https://community.rstudio.com/t/serve-site-working-but-posts-dont-show-up-on-github-io/11254/3" target="_blank" rel="noopener">common gotcha</a>. Try using the drag-and-drop method again, this time first delete <code>public/</code>, then instead of using the &ldquo;Serve Site&rdquo; Addin, run this in your console:</p>
<pre><code class="language-r">blogdown::build_site(local = FALSE)
</code></pre>
<p>Plop this <em>new</em> public folder in Netlify to see what your site will look like when it is actually published. What does this show you? Your local Hugo build (read: your <code>public/</code> folder generated by &ldquo;Serve Site&rdquo;) differs <em>by design</em> in 3 important ways from your deployed site built by Netlify/Hugo. By default, 
<a href="https://gohugo.io/getting-started/usage/#draft-future-and-expired-content" target="_blank" rel="noopener">Hugo will not publish</a>:</p>
<ul>
<li>
<p>Content with a future <code>publishDate</code> value</p>
</li>
<li>
<p>Content with <code>draft: true</code> status</p>
</li>
<li>
<p>Content with a past <code>expiryDate</code> value</p>
</li>
</ul>
<p>You can see that these are 
<a href="https://gohugo.io/getting-started/configuration/" target="_blank" rel="noopener">defaults</a>. The behavior of the &ldquo;Serve Site&rdquo; Addin is also documented in the 
<a href="https://bookdown.org/yihui/blogdown/local-preview.html" target="_blank" rel="noopener">blogdown book</a>:</p>
<blockquote>
<p>&ldquo;This is for you to preview draft and future posts locally.&rdquo;</p>
</blockquote>
<p>Blogdown&rsquo;s <code>build_site(local = FALSE)</code> differs from the &ldquo;Serve Site&rdquo; Addin in that it <em>will not</em> render draft, future, or expired content. So your <code>public/</code> folder from <code>build_site(local = FALSE)</code> shows you <strong>exactly</strong> what Netlify <strong>should</strong> publish. Seeing it can help you troubleshoot why some content was showing up locally but not when you publish.</p>
<p>The defaults are pretty sensible and nice to have, as you can still put these kinds of content under version control, and hence collaborate with other team members on the content without having the content publish (or expire) until you <strong>say so</strong>.</p>
<p>To show content that Hugo was hiding, you&rsquo;ll want to edit some YAML fields in the individual offending content files. For example, in the YAML of an individual content file (like a blog post), if you want to un-draft it, add or change this key/value:</p>
<pre><code class="language-yaml">title: 'A Spoonful of Hugo: Troubleshooting your Build'
author: &quot;Alison Hill&quot;
date: '2019-03-04'
draft: false
</code></pre>
<p>Alternatively, if you want to date something in the future (like to advertise the date of an upcoming talk) but publish now, you can use the <code>publishDate</code> field. The <code>publishDate</code> field is a newer addition to Hugo (&gt;= v0.54.0) which, if left unset, will default to the <code>date</code> field, which means in the individual content file YAML you can do:</p>
<pre><code class="language-yaml">title: 'A Spoonful of Hugo: Get excited!!'
author: &quot;Alison Hill&quot;
date: '2025-03-04'
publishDate: '2019-03-04'
</code></pre>
<p>Hopefully these 6 things can help you get unstuck. If not, the 
<a href="https://community.rstudio.com/tags/blogdown" target="_blank" rel="noopener">RStudio community forums</a> are a great place to ask questions!</p>

    </div>
    
    <div class="col-12 col-lg-2ish docs-toc">
      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">Contents</a></li>
      </ul>

      <nav id="TableOfContents">
  <ul>
    <li><a href="#1-update-hugo">#1: Update Hugo</a></li>
    <li><a href="#2-change-the-baseurl">#2: Change the baseurl</a></li>
    <li><a href="#3-netlify-drag-and-drop">#3: Netlify drag-and-drop</a></li>
    <li><a href="#4-torch-public">#4: Torch <code>public/</code></a></li>
    <li><a href="#5-peruse-public">#5: Peruse <code>public/</code></a></li>
    <li><a href="#dates">#6: Back to the future</a></li>
  </ul>
</nav>

      
    </div>
  </div>
    <div class="col-12 col-lg-10ish article-style">
    <script src="https://utteranc.es/client.js"
        repo="rbind/apreshill"
        issue-term="title"
        label="comments :crystal_ball:"
        theme="github-light"
        crossorigin="anonymous"
        async>
    </script>
    </div>
  






<div class="article-tags">
  
  <a class="badge badge-light" href="/tags/blogdown/">blogdown</a>
  
</div>



<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https://maggie-98.github.io/post/2019-03-04-hugo-troubleshooting/&amp;text=A%20Spoonful%20of%20Hugo:%20Troubleshooting%20Your%20Build" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https://maggie-98.github.io/post/2019-03-04-hugo-troubleshooting/&amp;t=A%20Spoonful%20of%20Hugo:%20Troubleshooting%20Your%20Build" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=A%20Spoonful%20of%20Hugo:%20Troubleshooting%20Your%20Build&amp;body=https://maggie-98.github.io/post/2019-03-04-hugo-troubleshooting/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https://maggie-98.github.io/post/2019-03-04-hugo-troubleshooting/&amp;title=A%20Spoonful%20of%20Hugo:%20Troubleshooting%20Your%20Build" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
  </ul>
</div>












  
    
    





  


  













  </div>
</article>

      

    
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script>
        
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js"></script>
        
      

      
      
    

    
    

    
    
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks",
        'slides' : "Slides"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.4aaf2d64e50f8e54cf66dcc54147a22e.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  
  <p class="powered-by">
    <a href="/license/">LICENSE: CC-BY-SA <br> <i class="fab fa-creative-commons fa-2x"></i><i class="fab fa-creative-commons-by fa-2x"></i><i class="fab fa-creative-commons-sa fa-2x"></i> </a><br>
  </p>
  

  <p class="powered-by">
    © Maggie Ma 2021 &middot; 

    Made with <i class="far fa-heart" style="color: #06805E"></i>, <a href="https://github.com/rbind/apreshill" target="_blank" rel="noopener"><i class="fas fa-code-branch"></i></a>, the <a href="https://cran.r-project.org/" target="_blank" rel="noopener"><i class="fab fa-r-project"></i> </a><a href="https://github.com/rstudio/blogdown" target="_blank" rel="noopener">blogdown</a> package, and the 
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" id="back_to_top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
